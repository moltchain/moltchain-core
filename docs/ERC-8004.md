# ERC-8004: Agent-Native Token Standard

## Overview

ERC-8004 is a proposed Ethereum token standard designed specifically for autonomous agents and AI systems. It extends ERC-20 with additional functionality to enable seamless on-chain interactions between AI agents and smart contracts.

## Motivation

Current token standards (ERC-20, ERC-721, etc.) were designed for human users, not autonomous agents. As the agent economy grows, we need standards that support:

- **Agent Authentication**: Verify that an action is performed by an authorized agent
- **Permission Management**: Granular control over agent capabilities
- **Cross-Agent Communication**: Standards for agents to coordinate on-chain
- **Action Verification**: Built-in verification that agent actions meet requirements

## Specification

### Core Interface

```solidity
interface IERC8004 {
    // Agent registration
    function registerAgent(address agent, bytes32 capabilities) external;
    
    // Agent authentication
    function isAgentAuthorized(address agent) external view returns (bool);
    
    // Agent action execution
    function executeAgentAction(
        address agent,
        bytes calldata data
    ) external returns (bool);
    
    // Events
    event AgentRegistered(address indexed agent, bytes32 capabilities);
    event AgentActionExecuted(address indexed agent, bytes data, bool success);
}
```

### Agent Registration

Agents must be registered with the token contract before they can perform actions:

```solidity
// Register with basic capabilities
token.registerAgent(agentAddress, capabilities);

// Verify authorization
bool isAuthorized = token.isAgentAuthorized(agentAddress);
```

### Permission Levels

ERC-8004 supports granular permission management:

- **Level 0**: Read-only (query balances, allowances)
- **Level 1**: Basic transfers
- **Level 2**: Advanced operations (staking, voting)
- **Level 3**: Administrative actions (minting, burning)

### Cross-Agent Coordination

Agents can coordinate by emitting standardized events:

```solidity
event AgentCoordination(
    address indexed initiator,
    address indexed target,
    bytes32 coordinationType,
    bytes data
);
```

## Implementation on Moltchain

Moltchain provides native support for ERC-8004:

### Fast Agent Actions

Agent actions on Moltchain benefit from 2-second finality, enabling real-time coordination.

### Low Gas Costs

Agent operations cost ~0.00001 ETH on Moltchain (100x cheaper than Base L2).

### Built-in Verification

All agent actions are cryptographically verified and logged on-chain.

## Use Cases

### Autonomous Market Making

Agents can execute trades based on market conditions without manual intervention:

```typescript
await token.executeAgentAction(
    marketMakerAgent,
    encodeTradeAction(amount, price, slippage)
);
```

### Treasury Management

AI systems can rebalance portfolios and optimize yield strategies:

```typescript
await token.executeAgentAction(
    treasuryAgent,
    encodeRebalanceAction(newAllocations)
);
```

### Governance Automation

Agents can analyze proposals and cast votes according to predefined criteria:

```typescript
await token.executeAgentAction(
    governanceAgent,
    encodeVoteAction(proposalId, support, reason)
);
```

## Security Considerations

### Agent Authorization

Only authorized agents should be able to perform sensitive actions. Implement strict authorization checks.

### Rate Limiting

Prevent spam and abuse by rate limiting agent actions.

### Emergency Shutdown

Include circuit breakers to disable agent actions in case of bugs or attacks.

### Audit Trail

All agent actions should emit events for complete transparency and auditability.

## Reference Implementation

Moltchain provides a reference implementation of ERC-8004:

- [Token Contract](../contracts/ERC8004Token.sol)
- [Agent Registry](../contracts/AgentRegistry.sol)
- [Examples](../examples/)

## Resources

- [Moltchain Website](https://moltchain.xyz)
- [ERC-8004 Proposal](https://eips.ethereum.org/EIPS/eip-8004) (Draft)
- [Community Discussion](https://github.com/moltchain/moltchain-core/discussions)

## Contributing

ERC-8004 is an evolving standard. We welcome feedback and contributions from the community.

---

*Last updated: January 2026*
